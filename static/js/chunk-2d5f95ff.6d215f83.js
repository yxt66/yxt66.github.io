(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d5f95ff"],{"2aa2":function(e,t,n){},"86ee":function(e,t,n){"use strict";n("2aa2")},c131:function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-button",{attrs:{type:"primary",icon:"el-icon-plus",size:"small"},on:{click:e.xinzeng}},[e._v("新增一级分类")]),n("el-tree",{staticStyle:{margin:"40px"},attrs:{data:e.list,props:e.defaultProps,"show-checkbox":"","node-key":"id","default-expand-all":!0},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.node,a=t.data;return n("span",{staticClass:"custom-tree-node"},[n("span",[e._v(e._s(i.label))]),n("span",[a.children?n("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(t){return t.stopPropagation(),e.append(a)}}},[e._v(" Append ")]):e._e(),n("el-popconfirm",{attrs:{title:"确定删除该列表吗(包含子列表)？"},on:{onConfirm:function(t){return e.deleteCategory(a)}}},[n("el-button",{staticStyle:{"margin-left":"15px"},attrs:{slot:"reference",type:"text",size:"mini"},on:{click:function(e){e.stopPropagation()}},slot:"reference"},[e._v(" Delete ")])],1),n("el-button",{staticStyle:{"margin-left":"15px"},attrs:{type:"text",size:"mini"},on:{click:function(t){return t.stopPropagation(),e.showDialog(a)}}},[e._v(" edit ")])],1)])}}])}),n("el-dialog",{attrs:{visible:e.isShow,width:"400px"},on:{"update:visible":function(t){e.isShow=t}}},[n("div",[n("el-input",{ref:"dialogInput",attrs:{placeholder:e.parent_cid?"请输入要新增的目录":"请输入要新增的一级目录"},model:{value:e.inputValue,callback:function(t){e.inputValue=t},expression:"inputValue"}})],1),n("div",{attrs:{slot:"footer",align:"center"},slot:"footer"},[n("el-button",{on:{click:function(t){e.isShow=!1}}},[e._v("取 消")]),n("el-button",{attrs:{type:"primary"},on:{click:e.addOrUpdateList}},[e._v("确 定")])],1)])],1)},a=[],r=n("9485"),s=n("ca38"),c=(n("6687"),n("0602"),n("77b0"),{data:function(){return{isShow:!1,inputValue:"",list:[],defaultProps:{children:"children",label:"name"},id:"",parent_cid:0,cat_level:1}},methods:{getLevelList:function(){var e=this;return Object(s["a"])(Object(r["a"])().mark((function t(){var n;return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$API.category.regGetLevelList();case 2:n=t.sent,200===n.code&&(e.list=n.data);case 4:case"end":return t.stop()}}),t)})))()},append:function(e){this.id="",this.inputValue="",this.parent_cid=e.id,this.cat_level=e.cat_level+1,this.isShow=!0},showDialog:function(e){var t=this;this.id=e.id,this.inputValue=e.name,this.isShow=!0,this.$nextTick((function(){t.$refs.dialogInput.focus()}))},xinzeng:function(){var e=this;this.id="",this.inputValue="",this.parent_cid=0,this.cat_level=1,this.isShow=!0,this.$nextTick((function(){e.$refs.dialogInput.focus()}))},addOrUpdateList:function(){var e=this;return Object(s["a"])(Object(r["a"])().mark((function t(){var n;return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.inputValue.trim()){t.next=3;break}return e.$message.error("列表名不能为空"),t.abrupt("return");case 3:if(!e.categoryIsExist(e.list,e.inputValue.trim())){t.next=6;break}return e.$message.error("列表名已存在，请勿重复添加"),t.abrupt("return");case 6:if(!e.id){t.next=12;break}return t.next=9,e.$API.category.reqAddOrUpdateList({id:e.id,name:e.inputValue.trim()});case 9:n=t.sent,t.next=15;break;case 12:return t.next=14,e.$API.category.reqAddOrUpdateList({name:e.inputValue.trim(),parent_cid:e.parent_cid,cat_level:e.cat_level});case 14:n=t.sent;case 15:200===n.code&&(e.isShow=!1,e.$message.success(n.message),e.getLevelList());case 16:case"end":return t.stop()}}),t)})))()},categoryIsExist:function(e,t){var n=this;return e.some((function(e){return e.name===t||!(!e.children||!n.categoryIsExist(e.children,t))}))},deleteCategory:function(e){var t=this;return Object(s["a"])(Object(r["a"])().mark((function n(){var i;return Object(r["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,t.$API.category.reqDeleteCategory(e.id);case 2:i=n.sent,200===i.code&&(t.$message.success(i.message),t.getLevelList());case 4:case"end":return n.stop()}}),n)})))()}},mounted:function(){this.getLevelList()}}),o=c,u=(n("86ee"),n("0b56")),l=Object(u["a"])(o,i,a,!1,null,null,null);t["default"]=l.exports}}]);