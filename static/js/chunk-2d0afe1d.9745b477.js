(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0afe1d"],{"0fe6":function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-card",[a("Category",{on:{getCategoryId:t.getCategoryId}})],1),a("el-card",{staticStyle:{margin:"20px 0px"}},[a("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-plus",disabled:!t.category3Id},on:{click:function(e){t.isShow=!0}}},[t._v("添加属性名")]),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.list,border:""}},[a("el-table-column",{attrs:{type:"index",label:"序号",width:"55px",align:"center"}}),a("el-table-column",{attrs:{prop:"attr_name",label:"属性名称",width:"150px"},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.row;return[a("el-popconfirm",{attrs:{"confirm-button-text":"确定","cancel-button-text":"取消",icon:"el-icon-info","icon-color":"red",title:"确定删除该属性名吗"},on:{onConfirm:function(e){return t.deleteAttr(r.id)}}},[a("el-button",{attrs:{slot:"reference",size:"small"},slot:"reference"},[t._v(t._s(r.attr_name)),a("i",{staticClass:"el-icon-close",staticStyle:{"margin-left":"5px"}})])],1)]}}])}),a("el-table-column",{attrs:{prop:"prop",label:"属性列表",width:"width"},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.row;return[t._l(r.attrValueList,(function(e){return a("el-tag",{key:e.id,staticStyle:{margin:"0px 5px"},attrs:{closable:"","disable-transitions":!1},on:{close:function(a){return t.handleClose(e.id)}}},[t._v(" "+t._s(e.attr_value_name)+" ")])})),a("el-button",{staticClass:"button-new-tag",attrs:{size:"small"},on:{click:function(e){return t.showDialog(r.id)}}},[t._v("+ New Tag")])]}}])})],1),a("el-dialog",{attrs:{visible:t.isShow,width:"400px"},on:{"update:visible":function(e){t.isShow=e}}},[a("div",[a("el-input",{ref:"dialogInput",attrs:{placeholder:t.attr_id?"请输入要新增的属性值":"请输入要添加的属性名"},model:{value:t.inputValue,callback:function(e){t.inputValue=e},expression:"inputValue"}})],1),a("div",{attrs:{slot:"footer",align:"center"},slot:"footer"},[a("el-button",{on:{click:t.clearAttrid}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.addAttrValue}},[t._v("确 定")])],1)])],1)],1)},n=[],i=a("9485"),s=a("ca38"),c=(a("0602"),a("77b0"),{name:"Attr",data:function(){return{attr_id:"",category1Id:"",category2Id:"",category3Id:"",list:[],inputValue:"",isShow:!1}},methods:{getCategoryId:function(t){var e=t.categoryId,a=t.level;1==a?(this.category1Id=e,this.category2Id="",this.category3Id=""):2==a?(this.category2Id=e,this.category3Id=""):(this.category3Id=e,this.getAttrList())},getAttrList:function(){var t=this;return Object(s["a"])(Object(i["a"])().mark((function e(){var a;return Object(i["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$API.attr.reqGetAttrList(t.category1Id,t.category2Id,t.category3Id);case 2:a=e.sent,200===a.code&&(t.list=a.data);case 4:case"end":return e.stop()}}),e)})))()},handleClose:function(t){var e=this;this.$confirm("确认删除该属性吗, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(s["a"])(Object(i["a"])().mark((function a(){var r;return Object(i["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,e.$API.attr.reqDeleteAttrvalue(t);case 2:r=a.sent,200===r.code&&(e.$message({type:"success",message:"删除成功!"}),e.getAttrList());case 4:case"end":return a.stop()}}),a)}))))},showDialog:function(t){var e=this;this.inputValue="",this.attr_id=t,this.isShow=!0,this.$nextTick((function(){e.$refs.dialogInput.focus()}))},addAttrValue:function(){var t=this;return Object(s["a"])(Object(i["a"])().mark((function e(){var a,r,n;return Object(i["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a="",!t.inputValue.trim()){e.next=23;break}if(!t.attr_id){e.next=12;break}if(r=t.list.some((function(e){return e.attrValueList.some((function(e){return e.attr_value_name===t.inputValue.trim()}))})),!r){e.next=7;break}return t.$message.warning("该属性值已存在，请勿重复添加"),e.abrupt("return");case 7:return e.next=9,t.$API.attr.reqAddAttrValue({attr_id:t.attr_id,attr_value_name:t.inputValue.trim()});case 9:a=e.sent,e.next=19;break;case 12:if(n=t.list.some((function(e){return e.attr_name===t.inputValue.trim()})),!n){e.next=16;break}return t.$message.warning("该属性名已存在，请勿重复添加"),e.abrupt("return");case 16:return e.next=18,t.$API.attr.reqAddAttr({cat_id:t.category3Id,attr_name:t.inputValue.trim()});case 18:a=e.sent;case 19:t.isShow=!1,200===a.code&&(t.attr_id="",t.inputValue="",t.$message.success("添加成功"),t.getAttrList()),e.next=24;break;case 23:t.$message.error("添加内容不能为空");case 24:case"end":return e.stop()}}),e)})))()},deleteAttr:function(t){var e=this;return Object(s["a"])(Object(i["a"])().mark((function a(){var r;return Object(i["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,e.$API.attr.reqDeleteAttr(t);case 2:r=a.sent,200===r.code&&(e.$message.success(r.message),e.getAttrList());case 4:case"end":return a.stop()}}),a)})))()},clearAttrid:function(){this.attr_id="",this.inputValue="",this.isShow=!1}}}),o=c,l=a("0b56"),u=Object(l["a"])(o,r,n,!1,null,null,null);e["default"]=u.exports}}]);